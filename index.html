<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>stlite app</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@stlite/mountable@0.31.0/build/stlite.css"
    />
  </head>
  <body>
    <div id="root"></div>
    <script src="https://cdn.jsdelivr.net/npm/@stlite/mountable@0.31.0/build/stlite.js"></script>
    <script>
stlite.mount(
  {
    requirements: ["yaml"] // Packages to install
    entrypoint: "app.py", // The target file of the `streamlit run` command
    files: { "app.py": `
import glob
import yaml
import pandas as pd

# Directory to collect YAML files
directory = '/data/objects'

# Collect YAML files
#### Ahh we cannot do this if using stmlit! 
yml_files = glob.glob(f'{directory}/*.yml')

# Remove relationships.yml from the list
yml_files = [f for f in yml_files if 'relationships.yml' not in f]

# Dictionary to store DataFrames
dfs = {}

# Convert YAML files to DataFrames
for file_path in yml_files:
    with open(file_path) as f:
        data = yaml.safe_load(f)
        node = data['nodes'][0]  # Assuming only one node per YAML file
        df = pd.DataFrame(node['fields'])
        dfs[node['name']] = df

# Output the DataFrames
for key, df in dfs.items():
    print(f"DataFrame for {key}:")
    print(df)
    print()

 
`,
    },
  },
  document.getElementById("root")
);
    </script>
  </body>
</html>
