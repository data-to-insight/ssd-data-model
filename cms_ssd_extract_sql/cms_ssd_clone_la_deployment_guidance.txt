/* clean up */
rm -rf /workspaces/ssd-data-model/cms_ssd_clone_la_deployment

/* Disable Cone Mode for Sparse Checkout */
git config --unset core.sparsecheckoutcone 

/* 
cd /workspaces/ssd-data-model
mkdir -p cms_ssd_clone_la_deployment/east-sussex
cd cms_ssd_clone_la_deployment/east-sussex

git clone --filter=blob:none --no-checkout https://github.com/data-to-insight/ssd-data-model.git .
git sparse-checkout init --cone

cat <<EOL > .git/info/sparse-checkout
cms_ssd_extract_sql/systemc/
!/cms_ssd_extract_sql/systemc/BAK/
!/cms_ssd_extract_sql/mosaic/BAK/
/cms_ssd_extract_sql/systemc/
!/rebaseline_repo.sh
!/setup.sh
!/requirements.txt
!/pyproject.toml
!/poetry.lock
EOL

echo '/cms_ssd_extract_sql/systemc/' > .git/info/sparse-checkout

echo 'cms_ssd_extract_sql/systemc/*' >> .git/info/sparse-checkout
echo '!/cms_ssd_extract_sql/systemc/BAK/' >> .git/info/sparse-checkout
echo '!/cms_ssd_extract_sql/mosaic/BAK/' >> .git/info/sparse-checkout
echo '!rebaseline_repo.sh' >> .git/info/sparse-checkout
echo '!setup.sh' >> .git/info/sparse-checkout
echo '!requirements.txt' >> .git/info/sparse-checkout
echo '!pyproject.toml' >> .git/info/sparse-checkout
echo '!poetry.lock' >> .git/info/sparse-checkout


git checkout main

/******************************/
cd ../../..
mkdir -p cms_ssd_clone_la_deployment/knowsley
cd cms_ssd_clone_la_deployment/knowsley

git clone --filter=blob:none --no-checkout https://github.com/data-to-insight/ssd-data-model.git .
git sparse-checkout init --cone

cat <<EOL > .git/info/sparse-checkout
cms_ssd_extract_sql/systemc/
/cms_ssd_extract_sql/systemc/*
!/cms_ssd_extract_sql/systemc/specific_subdir_to_exclude/
/cms_ssd_extract_sql/systemc/
/rebaseline_repo.sh
!/setup.sh
!/requirements.txt
!/pyproject.toml
!/poetry.lock
EOL

git checkout main

/******************************/